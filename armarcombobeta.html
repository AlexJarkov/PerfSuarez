<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <title>ARMA TU COMBO!!!</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="icon" sizes="16x16 32x32 48x48" href="../PerfSuarez/imagenes/Cowboy.ico" type="image/x-icon">
    <link rel="icon" sizes="16x16 32x32 48x48" href="../PerfSuarez/imagenes/Cowboy.webp" type="image/webp">
    <meta property="og:title" content="Arma Tu Combo">
    <meta property="og:description" content="Nuestra más reciente novedad: Arma Tu Combo!!.">
    <meta property="og:image" content="https://www.perfumeriasuarez.com/imagenes/miniatura.JPEG">
    <meta property="og:url" content="https://perfumeriasuarez.com/armarcombo.html">
    <meta property="og:type" content="website">
</head>

<body>
    <div data-include="../header.html"></div>
    <main>
        <section id="combos-personalizados">
            <div class="container">
                <h2>Combos Personalizados</h2>
                <div class="combo-type-selection">
                    <label for="combo-type">Selecciona el tipo de combo:</label>
                    <select id="combo-type" onchange="toggleComboType()">
                        <option value="perfumes">Combo de Perfumes</option>
                        <option value="decants">Set de Decants</option>
                    </select>
                </div>
                <div id="decant-quantity-container" class="hidden">
                    <label for="decant-quantity">Selecciona la cantidad de decants:</label>
                    <select id="decant-quantity" onchange="populateComboItems()">
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                </div>
                <div class="combo-container">
                    <div id="combo-items" class="container"></div>

                </div>

                <div class="total">
                    <p id="savings" style="color: green;">Estás ahorrando: 0.00</p>
                    <h3>Total: <span id="total-price">0.00</span></h3>
                </div>
                <div class="whatsapp-button">
                    <a id="whatsapp-link" class="disabled" href="javascript:void(0);">Selecciona tres perfumes y el
                        regalo para
                        continuar</a>
                </div>
            </div>
        </section>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const whatsappLink = document.getElementById('whatsapp-link');
            const comboTypeSelect = document.getElementById('combo-type');
            const decantQuantityContainer = document.getElementById('decant-quantity-container');
            const comboItemsContainer = document.getElementById('combo-items');
            const giftSelection = document.getElementById('gift-selection');
            let currentCurrency = 'usd'; // Moneda actual (usd o bs)
            const exchangeRate = 7; // Tipo de cambio fijo para convertir a bolivianos

            const products = {
                perfumes: [
                    {
                        "name": "AFNAN 9PM EDP 100ml",
                        "image": "imagenes/fotos-catalogo/arabes/Afnam-9pm.png",
                        "price": 82,
                        "discountedPrice": 75
                    },
                    {
                        "name": "ARMAF Club De Nuit Intense EDT 105ml",
                        "image": "imagenes/fotos-catalogo/arabes/armaf-club-de-nuit-edp-pr.webp",
                        "price": 82,
                        "discountedPrice": 77
                    },
                    {
                        "name": "Carolina Herrera 212 Heroes Man EDT 90ml",
                        "image": "imagenes/fotos-catalogo/ch/Untitled-2.jpg",
                        "price": 104,
                        "discountedPrice": 92
                    },
                    {
                        "name": "Carolina Herrera Bad Boy Extreme 100ml",
                        "image": "imagenes/fotos-catalogo/ch/Untitled.jpg",
                        "price": 108,
                        "discountedPrice": 108
                    },
                    {
                        "name": "Carolina Herrera Bad Boy Extreme 150ml",
                        "image": "imagenes/fotos-catalogo/ch/Untitled.jpg",
                        "price": 108,
                        "discountedPrice": 108
                    },
                    {
                        "name": "Carolina Herrera Good Girl Blush Elixir",
                        "image": "imagenes/fotos-catalogo/ch/SCH-40215_65198197_GG-BLUSH-ELIXIR-EDP-80ML.webp",
                        "price": 160,
                        "discountedPrice": 160
                    },
                    {
                        "name": "Carolina Herrera Very Good Girl EDP 80ml",
                        "image": "imagenes/fotos-catalogo/ch/Untitled-8.png",
                        "price": 124,
                        "discountedPrice": 122
                    },
                    {
                        "name": "Carolina Herrera Very Good Girl Glam Parfum",
                        "image": "imagenes/fotos-catalogo/ch/SCH-24697_65188259_GG-VGG-GLAM-PARFUM-80ML.webp",
                        "price": 144,
                        "discountedPrice": 108
                    },
                    {
                        "name": "Dolce&Gabbana Light Blue EDT 100ml",
                        "image": "imagenes/fotos-catalogo/d&g/Untitled.jpg",
                        "price": 122,
                        "discountedPrice": 96
                    },
                    {
                        "name": "Dolce&Gabbana Light Blue EDT 200ml",
                        "image": "imagenes/fotos-catalogo/d&g/Untitled.jpg",
                        "price": 158,
                        "discountedPrice": 121
                    },
                    {
                        "name": "Dolce&Gabbana Light Blue Pour Homme EDT 125ml",
                        "image": "imagenes/fotos-catalogo/d&g/MainSpecs-JPG-2000x2000 - px-LB-PH-200 (1).png",
                        "price": 105,
                        "discountedPrice": 84
                    },
                    {
                        "name": "Dolce&Gabbana Light Blue Pour Homme Summer Vibes EDT 125ml",
                        "image": "imagenes/fotos-catalogo/d&g/Untitled-2.jpg",
                        "price": 111,
                        "discountedPrice": 89
                    },
                    {
                        "name": "Dolce&Gabbana Pour Homme EDT 125ml",
                        "image": "imagenes/fotos-catalogo/d&g/Untitled-3.jpg",
                        "price": 105,
                        "discountedPrice": 84
                    },
                    {
                        "name": "Dolce&Gabbana The One Gold Pour Homme EDP Intense 100ml",
                        "image": "imagenes/fotos-catalogo/d&g/dg-the-one-gold-men-edp-pr.webp",
                        "price": 110,
                        "discountedPrice": 100
                    },
                    {
                        "name": "Dolce&Gabbana The One Pour Homme EDT 100ml",
                        "image": "imagenes/fotos-catalogo/d&g/TOFMEDT2021-150ml_30212150000_RGB_52x30_300dpicopiacopia.png",
                        "price": 100,
                        "discountedPrice": 78
                    },
                    {
                        "name": "Givenchy Gentleman EDP Boisee 100ml",
                        "image": "imagenes/fotos-catalogo/givenchy/Untitled-1.jpg",
                        "price": 104,
                        "discountedPrice": 104
                    },
                    {
                        "name": "Givenchy Gentleman Society 100ml",
                        "image": "imagenes/fotos-catalogo/givenchy/Untitled-2.jpg",
                        "price": 128,
                        "discountedPrice": 116
                    },
                    {
                        "name": "Hermés H24 EDP 100ml",
                        "image": "imagenes/fotos-catalogo/hermes/Untitled-22.jpg",
                        "price": 131,
                        "discountedPrice": 122
                    },
                    {
                        "name": "Hermés H24 EDT 100ml",
                        "image": "imagenes/fotos-catalogo/hermes/Untitled-21.jpg",
                        "price": 100,
                        "discountedPrice": 84
                    },
                    {
                        "name": "Jean Paul Gaultier La Belle EDP 100ml",
                        "image": "imagenes/fotos-catalogo/jpg/Untitled-2.jpg",
                        "price": 114,
                        "discountedPrice": 114
                    },
                    {
                        "name": "K By Dolce&Gabbana EDT 100ml",
                        "image": "imagenes/fotos-catalogo/d&g/30494500000.png",
                        "price": 110,
                        "discountedPrice": 87
                    },
                    {
                        "name": "K By Dolce&Gabbana EDT 200ml",
                        "image": "imagenes/fotos-catalogo/d&g/30494500000.png",
                        "price": 160,
                        "discountedPrice": 122
                    },
                    {
                        "name": "K By Dolce&Gabbana EDP 200ml",
                        "image": "imagenes/fotos-catalogo/d&g/DG_K_EDP_PACK_200ML_TIFF_RGB_300_DPI2000x2000.png",
                        "price": 160,
                        "discountedPrice": 122
                    },
                    {
                        "name": "K By Dolce&Gabbana EDP Intense 100ml",
                        "image": "imagenes/fotos-catalogo/d&g/d42ab86d-c8d7-419d-bb14-2ec7dbeab2fa.9f1ca683e8878c7d9e877652290a6c1c.webp",
                        "price": 162,
                        "discountedPrice": 116
                    },
                    {
                        "name": "Lacoste L12.12 Blanc EDT 100ml",
                        "image": "imagenes/fotos-catalogo/lacoste/LACO8244887803_G.jpg",
                        "price": 94,
                        "discountedPrice": 83
                    },
                    {
                        "name": "Lattafa Asad EDP 100ml",
                        "image": "imagenes/fotos-catalogo/arabes/777571_3_lattafa-asad-man-eau-de-parfum-100ml.jpg",
                        "price": 82,
                        "discountedPrice": 77
                    },
                    {
                        "name": "Lattafa Asad Zanzibar EDP 100ml",
                        "image": "imagenes/fotos-catalogo/arabes/ASAD-ZANZIBAR-1.jpg",
                        "price": 82,
                        "discountedPrice": 77
                    },
                    {
                        "name": "Lattafa Khamrah",
                        "image": "imagenes/fotos-catalogo/arabes/KHAMRAH-LATTAFA-.jpg",
                        "price": 95,
                        "discountedPrice": 94
                    },
                    {
                        "name": "Lattafa Khamrah Qahwa",
                        "image": "imagenes/fotos-catalogo/arabes/1149057834.avif",
                        "price": 95,
                        "discountedPrice": 94
                    },
                    {
                        "name": "Lattafa Qaed Al Fursan Unlimited EDP 100ml",
                        "image": "imagenes/fotos-catalogo/arabes/qaed-al-fursan-unlimited-perfume-bottle-against-white-background.webp",
                        "price": 82,
                        "discountedPrice": 58
                    },
                    {
                        "name": "Moncler Pour Femme 100ml",
                        "image": "imagenes/fotos-catalogo/moncler/MC002A01_MONCLER_POURFEMME_100ML_BOTTLEFRONTVIEW_jpg_300.webp",
                        "price": 161,
                        "discountedPrice": 132
                    },
                    {
                        "name": "Moncler Pour Femme 150ml (Con Pantalla)",
                        "image": "imagenes/fotos-catalogo/moncler/Untitled.jpg",
                        "price": 208,
                        "discountedPrice": 194
                    },
                    {
                        "name": "Moncler Pour Homme 100ml",
                        "image": "imagenes/fotos-catalogo/moncler/moncler-pour-homme-pr.webp",
                        "price": 161,
                        "discountedPrice": 132
                    },
                    {
                        "name": "Moncler Sunrise Pour Femme 150ml",
                        "image": "imagenes/fotos-catalogo/moncler/0c277468e500180723e2be95cf04df7f3ae18d31_eccbb7bd-3434-4819-90d2-front.webp",
                        "price": 138,
                        "discountedPrice": 132
                    },
                    {
                        "name": "Montblanc Explorer Ultra Blue EDP 100ml",
                        "image": "imagenes/fotos-catalogo/mntblanc/DECANdasdas.png",
                        "price": 104,
                        "discountedPrice": 89
                    },
                    {
                        "name": "Montblanc Legend EDP 100ml",
                        "image": "imagenes/fotos-catalogo/mntblanc/MPONT.png",
                        "price": 100,
                        "discountedPrice": 87
                    },
                    {
                        "name": "Q By Dolce&Gabbana EDP 100ml",
                        "image": "imagenes/fotos-catalogo/d&g/8057971187829_G.jpg",
                        "price": 150,
                        "discountedPrice": 115
                    },
                    {
                        "name": "Rabanne One Million EDT 100ml",
                        "image": "imagenes/fotos-catalogo/paco/Untitled-2.png",
                        "price": 100,
                        "discountedPrice": 99
                    },
                    {
                        "name": "Versace Pour Homme Dylan Blue EDT 100ml",
                        "image": "imagenes/fotos-catalogo/versace/Untitled.png",
                        "price": 114,
                        "discountedPrice": 93
                    }
                ],
                decants: [
                    { name: 'K By Dolce&Gabbana Decant 5ml', image: 'imagenes/fotos-catalogo/d&g/30494500000.png', price: 15, discountedPrice: 12 },
                    // Otros decants...
                ],
                gifts: [
                    { name: 'Waka', image: 'imagenes/soproPA600_fa505239-c929-4b5a-af51-d47d3b311967_1024x1024@2x.webp', price: 0, discountedPrice: 0 },
                    { name: 'Boxer', image: 'imagenes/boxer.PNG', price: 0, discountedPrice: 0 },
                    { name: 'Vela aromática', image: 'imagenes/vela.jpg', price: 0, discountedPrice: 0 },
                ]
            };

            function toggleComboType() {
    const comboType = comboTypeSelect.value;

    // Restablecer el precio total a cero
    document.getElementById('total-price').innerText = '0.00';
    document.getElementById('savings').innerText = 'Estás ahorrando: $0.00';

    // Mostrar u ocultar el selector de cantidad de decants según el tipo de combo
    if (comboType === 'decants') {
        console.log("Mostrando selector de decants");
        decantQuantityContainer.classList.remove('hidden'); // Mostrar el selector de decants
        currentCurrency = 'bs'; // Cambiar moneda a bolivianos
    } else if (comboType === 'perfumes') {
        console.log("Ocultando selector de decants");
        decantQuantityContainer.classList.add('hidden'); // Ocultar el selector de decants
        currentCurrency = 'usd'; // Cambiar moneda a dólares
    }

    // Actualizar la interfaz para reflejar la selección actual
    populateComboItems();
    updateTotal();
}



            function populateComboItems() {
                // Limpiar el contenedor para evitar duplicados
                comboItemsContainer.innerHTML = '';

                // Obtener el tipo de combo seleccionado
                const comboType = comboTypeSelect.value;

                // Determinar la cantidad de elementos a mostrar
                let count = comboType === 'decants' ? parseInt(decantQuantitySelect.value) : 3;

                // Asegurarse de que la cantidad sea un número válido
                count = isNaN(count) ? 3 : count;

                // Crear los elementos de acuerdo con la cantidad seleccionada
                for (let i = 0; i < count; i++) {
                    const comboItem = createComboItem(comboType, i);
                    comboItemsContainer.appendChild(comboItem);
                }

                // Añadir el regalo solo si el combo es de perfumes completos
                if (comboType === 'perfumes') {
                    const giftItem = createGiftItem();
                    comboItemsContainer.appendChild(giftItem);
                }
            }

            function createGiftItem() {
                const giftItem = document.createElement('div');
                giftItem.className = 'combo-item';

                const comboSelection = document.createElement('div');
                comboSelection.className = 'combo-selection';

                const image = document.createElement('img');
                image.src = 'imagenes/depositphotos_82350542-stock-photo-beautiful-gold-present-box-with.jpg'; // Imagen del regalo
                image.alt = 'Regalo';
                image.id = 'gift-image';

                const title = document.createElement('h3');
                title.innerText = 'Regalo';

                const name = document.createElement('p');
                name.id = 'gift-name';

                const button = document.createElement('button');
                button.className = 'dropdown-toggle';
                button.innerText = 'Seleccionar Regalo';
                button.onclick = () => toggleDropdown('gift');

                const dropdown = document.createElement('div');
                dropdown.className = 'dropdown';
                dropdown.id = 'gift-dropdown';

                // Poblar el dropdown con las opciones de regalos
                populateDropdown(dropdown, 'gift', 0);

                comboSelection.appendChild(image);
                comboSelection.appendChild(title);
                comboSelection.appendChild(name);
                comboSelection.appendChild(button);
                comboSelection.appendChild(dropdown);
                giftItem.appendChild(comboSelection);

                return giftItem;
            }


            function createComboItem(category, index) {
                const comboItem = document.createElement('div');
                comboItem.className = 'combo-item';

                const comboSelection = document.createElement('div');
                comboSelection.className = 'combo-selection';

                const image = document.createElement('img');
                image.src = 'imagenes/image.webp';
                image.alt = `${category} producto`;
                image.id = `${category}-image-${index}`;

                const name = document.createElement('p');
                name.id = `${category}-name-${index}`;

                const button = document.createElement('button');
                button.className = 'dropdown-toggle';
                button.dataset.category = category;
                button.dataset.index = index;
                button.onclick = () => toggleDropdown(category, index);
                button.innerText = 'Seleccionar Producto';

                const dropdown = document.createElement('div');
                dropdown.className = 'dropdown';
                dropdown.id = `${category}-dropdown-${index}`;

                // Poblar el dropdown con las opciones de productos
                populateDropdown(dropdown, category, index);

                comboSelection.appendChild(image);
                comboSelection.appendChild(name);
                comboSelection.appendChild(button);
                comboSelection.appendChild(dropdown);
                comboItem.appendChild(comboSelection);

                return comboItem;
            }

            function populateDropdown(dropdown, category, index) {
                dropdown.innerHTML = ''; // Limpiar opciones previas
                const productsList = products[category];

                productsList.forEach((product) => {
                    const item = document.createElement('div');
                    item.className = 'dropdown-item';
                    item.innerHTML = `<img src="${product.image}" alt="${product.name}"><p>${product.name}</p>`;
                    item.onclick = () => selectProduct(category, index, product);
                    dropdown.appendChild(item);
                });
            }

            function selectProduct(category, index, product) {
                // Actualizar la imagen y el nombre del producto seleccionado
                document.getElementById(`${category}-image-${index}`).src = product.image;
                document.getElementById(`${category}-name-${index}`).innerText = product.name;

                // Actualizar el total
                updateTotal();

                // Cerrar todos los dropdowns
                closeAllDropdowns();
            }

            function toggleDropdown(category, index) {
                closeAllDropdowns();
                const dropdown = document.getElementById(`${category}-dropdown-${index}`);
                if (dropdown) {
                    dropdown.classList.toggle('show');
                }
            }

            function closeAllDropdowns() {
                const dropdowns = document.querySelectorAll('.dropdown');
                dropdowns.forEach(dropdown => {
                    dropdown.classList.remove('show');
                });
            }

            function updateTotal() {
                let total = 0;
                let originalTotal = 0;

                // Obtener los productos seleccionados y calcular el total
                const comboType = comboTypeSelect.value;
                const items = document.querySelectorAll(`.combo-item`);
                items.forEach((item) => {
                    const productName = item.querySelector('p').innerText;
                    const product = products[comboType].find(p => p.name === productName);
                    if (product) {
                        total += product.discountedPrice;
                        originalTotal += product.price;
                    }
                });

                const savings = originalTotal - total;
                const totalPriceElement = document.getElementById('total-price');
                const savingsElement = document.getElementById('savings');

                if (currentCurrency === 'usd') {
                    totalPriceElement.innerText = `$${total.toFixed(2)}`;
                    savingsElement.innerText = `Estás ahorrando: $${savings.toFixed(2)}`;
                } else {
                    const totalBs = total * exchangeRate;
                    const savingsBs = savings * exchangeRate;
                    totalPriceElement.innerText = `Bs ${totalBs.toFixed(2)}`;
                    savingsElement.innerText = `Estás ahorrando: Bs ${savingsBs.toFixed(2)}`;
                }
            }

            document.addEventListener('click', (event) => {
                if (!event.target.classList.contains('dropdown-toggle')) {
                    closeAllDropdowns();
                }
            });

            // Inicializar la interfaz con el combo seleccionado por defecto
            comboTypeSelect.addEventListener('change', toggleComboType);
            decantQuantitySelect.addEventListener('change', populateComboItems);
            toggleComboType();
        });


    </script>
    <div data-include="footer.html">
    </div>
    <script src="js/scripts.js"></script>
    <script src="js/include.js"></script>
</body>

</html>